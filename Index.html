<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ahad Music Player ðŸŽ§</title>
<script src="https://unpkg.com/feather-icons"></script>

<style>
:root{
--bg:#0b0b10;
--card:#15151d;
--text:#fff;
--sub:#9ca3af;
--p:#8E2DE2;
--s:#4A00E0;
--grad:linear-gradient(135deg,var(--p),var(--s));
}
*{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,system-ui}
body{
min-height:100vh;
background:radial-gradient(circle at top,#1b1b2f,var(--bg));
display:flex;align-items:center;justify-content:center;
color:var(--text);
}

.card{
width:92%;max-width:420px;
background:rgba(21,21,29,.95);
backdrop-filter:blur(20px);
border-radius:28px;
padding:30px;
box-shadow:0 30px 80px rgba(0,0,0,.7);
text-align:center;
animation:fadeUp .8s ease;
}
@keyframes fadeUp{from{opacity:0;transform:translateY(40px)}}

h1{
font-size:1.6rem;
margin-bottom:25px;
background:linear-gradient(90deg,#8E2DE2,#4A00E0,#00c6ff,#8E2DE2);
background-size:200%;
-webkit-background-clip:text;
-webkit-text-fill-color:transparent;
animation:shine 3s linear infinite;
}
@keyframes shine{to{background-position:200%}}

.search{
display:flex;
background:#0f0f16;
border-radius:18px;
padding:6px;
margin-bottom:20px;
}
.search input{
flex:1;background:transparent;border:none;
color:#fff;padding:12px;font-size:.95rem;outline:none
}
.search button{
width:46px;border:none;border-radius:14px;
background:var(--grad);color:#fff;cursor:pointer
}

.loader{
display:none;
width:44px;height:44px;
border:3px solid #333;
border-top:3px solid var(--p);
border-radius:50%;
animation:spin .8s linear infinite;
margin:25px auto;
}
@keyframes spin{to{transform:rotate(360deg)}}

.player{display:none;flex-direction:column;align-items:center}
.cover{
width:240px;height:240px;
border-radius:24px;
object-fit:cover;
box-shadow:0 15px 50px rgba(0,0,0,.6);
margin-bottom:20px;
}
.song h2{font-size:1.25rem}
.song p{color:var(--sub);font-size:.9rem;margin-bottom:18px}

.progress-area{width:100%;margin-bottom:10px}
.progress{
width:100%;appearance:none;height:6px;
background:#2a2a35;border-radius:5px;cursor:pointer
}
.progress::-webkit-slider-thumb{
appearance:none;width:14px;height:14px;
background:#fff;border-radius:50%;
box-shadow:0 0 12px var(--p)
}
.time{
display:flex;justify-content:space-between;
font-size:.75rem;color:#aaa;margin-top:6px
}

.controls{
display:flex;align-items:center;gap:30px;
margin:22px 0;
}
.controls button{
background:none;border:none;color:#bbb;cursor:pointer
}
.play{
width:64px;height:64px;border-radius:50%;
background:var(--grad);color:#fff;
display:flex;align-items:center;justify-content:center;
box-shadow:0 0 30px rgba(142,45,226,.6);
}

.download{
width:100%;
padding:15px;
border-radius:18px;
border:none;
background:#1f1f2a;
color:#fff;font-weight:600;
display:flex;align-items:center;justify-content:center;
gap:10px;
cursor:pointer;
transition:.3s;
}
.download:hover{
background:var(--grad);
box-shadow:0 0 25px rgba(142,45,226,.6);
}
</style>
</head>

<body>
<div class="card">
<h1>Ahad Music Player ðŸŽ§</h1>

<div class="search">
<input id="q" placeholder="Search song ">
<button onclick="searchSong()"><i data-feather="search"></i></button>
</div>

<div class="loader" id="loader"></div>

<div class="player" id="player">
<audio id="audio"></audio>

<img id="cover" class="cover">
<div class="song">
<h2 id="title">Title</h2>
<p id="artist">Artist</p>
</div>

<div class="progress-area">
<input type="range" id="progress" class="progress" value="0" min="0" max="100">
<div class="time">
<span id="current">0:00</span>
<span id="total">0:00</span>
</div>
</div>

<div class="controls">
<button onclick="seek(-10)"><i data-feather="rotate-ccw"></i></button>
<button class="play" onclick="togglePlay()"><i data-feather="play"></i></button>
<button onclick="seek(10)"><i data-feather="rotate-cw"></i></button>
</div>

<button class="download" onclick="downloadMp3()">
<i data-feather="download"></i> Download MP3
</button>
</div>
</div>

<script>
feather.replace();

const audio=document.getElementById("audio");
const loader=document.getElementById("loader");
const player=document.getElementById("player");
const progress=document.getElementById("progress");
const cur=document.getElementById("current");
const tot=document.getElementById("total");

let dlink="",fname="song";

async function searchSong(){
const q=document.getElementById("q").value.trim();
if(!q)return;

player.style.display="none";
loader.style.display="block";

try{
const r=await fetch(`https://arslan-apis.vercel.app/download/spotidl?q=${encodeURIComponent(q)}`);
const d=await r.json();
if(!d.status)throw 0;

document.getElementById("cover").src=d.metadata.thumbnail;
document.getElementById("title").innerText=d.metadata.title;
document.getElementById("artist").innerText=d.metadata.artist;

audio.src=d.download.url;
dlink=d.download.url;
fname=`${d.metadata.title} - ${d.metadata.artist}`;

loader.style.display="none";
player.style.display="flex";
audio.play();
}catch{
alert("Song not found");
loader.style.display="none";
}
}

function togglePlay(){
audio.paused?audio.play():audio.pause();
}

function seek(s){audio.currentTime+=s}

audio.addEventListener("loadedmetadata",()=>{
tot.innerText=format(audio.duration);
});

audio.addEventListener("timeupdate",()=>{
progress.value=(audio.currentTime/audio.duration)*100;
cur.innerText=format(audio.currentTime);
});

progress.addEventListener("input",()=>{
audio.currentTime=(progress.value/100)*audio.duration;
});

function format(sec){
const m=Math.floor(sec/60);
const s=Math.floor(sec%60);
return `${m}:${s<10?"0"+s:s}`;
}

async function downloadMp3(){
if(!dlink)return;
try{
const r=await fetch(dlink);
const b=await r.blob();
const u=URL.createObjectURL(b);
const a=document.createElement("a");
a.href=u;a.download=fname+".mp3";a.click();
URL.revokeObjectURL(u);
}catch{
window.open(dlink,"_blank");
}
}

document.getElementById("q").addEventListener("keypress",e=>{
if(e.key==="Enter")searchSong();
});
</script>
</body>
</html>
